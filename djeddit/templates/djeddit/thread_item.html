<!DOCTYPE html>
{% load djeddit_tags %}
<li class="list-group-item">
    <div class="row vertical-align">
        <div class="col-sm-1 hidden-sm hidden-xs col-icon hover-point" onclick="window.location='{% threadUrl thread %}'">
            {# As we are disallowing link posts, this part is not necessary: <i class="fa {% threadIconClass thread %} fa-2x"></i> #}
            <i class="far fa-comments fa-2x"></i>
        </div>
        <div class="col-sm-8 col-xs-9 list-group-item-main-col">
            <a href="{% threadUrl thread %}"><h4 class="inline">{% firstLine thread.title 50 %}</h4></a>
            <div class="text-muted inline">
                {% if showTopic %}on <a href="{% url 'topicPage' thread.topic.urlTitle %}">{{ thread.topic.title }}</a> {% endif %}
            </div>
            <br>
            <div class="text-muted inline full-lined djeddit-thread-item-footer">
                <div class="djeddit-score">
                    {% if user.is_authenticated %}
                    <i class="fas fa-arrow-up djeddit-score-upvote {% postVoteClicked user thread.op True %} " 
                        onclick="javascript:window.topicFuncs.votePost(this, '{{ thread.op.uid }}', true, $(this).hasClass('color-primary'), '{% url "votePost" %}')"></i>
                    <span class="djeddit-score-number">{{ thread.op.score }}</span>
                    <i class="fas fa-arrow-down djeddit-score-downvote {% postVoteClicked user thread.op False %}"
                        onclick="javascript:window.topicFuncs.votePost(this, '{{ thread.op.uid }}', $(this).hasClass('color-primary'), true, '{% url "votePost" %}')"></i>
                    {% else %}
                    <i class="fas fa-arrow-up djeddit-score-upvote" 
                        onclick="javascript:window.topicFuncs.loginNeeded()"></i>
                    <span class="djeddit-score-number">{{ thread.op.score }}</span>
                    <i class="fas fa-arrow-down djeddit-score-downvote"
                        onclick="javascript:window.topicFuncs.loginNeeded()"></i>
                    {% endif %}
                </div>
                <div class="djeddit-created-by">
                    {% if showCreatedBy %}
                        {% if thread.op.created_by %}
                            <a href="{% url 'userSummary' thread.op.created_by.pk %}">{% postUserName thread.op.created_by %}</a> 
                        {% else %} 
                            {% postUserName thread.op.created_by %} 
                        {% endif %} 
                        <div class="djeddit-date-verbose">
                            &middot;
                            {% postDate thread.op.created_on 'on ' %}
                        </div>
                        <div class="djeddit-date-silly">
                                &middot;
                                {% postDate thread.op.created_on 'on ' False%}
                            </div>
                    {% else %}
                        {{ thread.op.created_on }}
                    {% endif %}
                </div>
                <div class="count-box-small" onclick="window.location='{{ thread.relativeUrl }}'">
                    &middot;
                    <i class="far fa-comment"></i>
                    {% with thread.op.getReplies|length as commentsCount %}
                        {{ commentsCount }}
                    {% endwith%}
                </div>
            </div>
        </div>
        <div class="col-xs-3">
            {% comment %} <div class="count-box" onclick="window.location='{{ thread.relativeUrl }}'">
                <div class="count-box-score text-muted">{{ thread.op.score }}</div>
                <div class="count-box-context text-muted">Points</div>
            </div> {% endcomment %}
            {% comment %} <div class="count-box" onclick="window.location='{{ thread.relativeUrl }}'">
                <div class="count-box-score text-muted">{{ thread.views }}</div>
                <div class="count-box-context text-muted">Views</div>
            </div> {% endcomment %}
            <div class="count-box" onclick="window.location='{{ thread.relativeUrl }}'">
                {% with thread.op.getReplies|length as commentsCount %}
                    <div class="count-box-score text-muted">{{ commentsCount }}</div>
                    {% if commentsCount == 1 %}
                    <div class="count-box-context text-muted">Comment</div>
                    {% else %}
                    <div class="count-box-context text-muted">Comments</div>
                    {% endif %}
                {% endwith%}
            </div>
        </div>
    </div>
</li>
